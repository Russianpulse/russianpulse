<% content_for(:meta_title, strip_tags(@post.title)) %>

<% content_for :share_description do %>
  <%= render :partial => 'shared/share_description', locals: { title: strip_tags(@post.title), url: smart_post_url(@post), text: @post.body, image: @post.picture_url } %>
<% end %>

<%= render partial: 'post' %>

<%= snippet :below_article, url: smart_post_url(@post), adult: @post.has_picture? %>

<div class='mdl-grid'>
  <div class='mdl-cell mdl-cell--6-col'>
    <%= render partial: 'comments', locals: { comments: @post.comments.order(:created_at) } %>
  </div>
  <div class='mdl-cell mdl-cell--6-col'>
    <%= render partial: 'most_active_commenters', locals: { users: User.where(id: Comment.recent.limit(100).pluck(:user_id)).limit(10) } %>
  </div>
</div>

<hr />
<br />
<br />

<h2><%= t(:recent_comments) %></h2>

<br />
  
<div class="row">
  <% Comment.recent.not_for(@post).limit(20).in_groups(2, false).each do |comments| %>
    <div class="col-sm-6">
      <%= render partial: "shared/recent_comments", locals: { comments: comments } %>
    </div>
  <% end %>
</div>

<br />

<%= render "read_more" %>

<%= snippet :below_comments, :url => smart_post_url(@post), adult: @post.has_picture? %>
